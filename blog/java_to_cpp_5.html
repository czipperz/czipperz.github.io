<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst"></script>
    <title> Czipperz's Blog - C++ galore </title>
  </head>
  <body>
    <div id="page">
      <div id="top">
        <h1 id="title"> Czipperz's Blog - C++ galore </h1>
      </div>
      <div id="content">
        <div class="article" id="main_article">
          <h2><a href="java_to_cpp_5.html"> Java to C++ - method modifiers. </a></h2>
          <h4 class="date">9/26/2015</h4>
          <p>
            Like in Java, you can add modifiers to methods, such as
            specifying what they can throw or declaring them
            as <code>const</code>.  These are very powerful and fit
            right into the type system.
          </p>
          <br />
          <p>
            Let's look at how to apply <code>const</code> properly to
            methods.  Last time we showed two methods that retrieve
            elements from the <code>Array</code>:
          </p>
          <pre class="prettyprint">
            // unchecked const access
            T&amp; operator[](int index) {
                return array_start[index];
            }

            // checked access - throws exception if out of bounds
            T&amp; at(int index) {
                if(index &lt; 0 || index &gt;= length)
                    throw std::out_of_range("Index out of range");
                return array_start[index];
            }
          </pre>
          <p>
            None of the methods on the <code>Array</code> class have
            a <code>const</code> flag so a <code>const Array</code> is
            useless!  Looking at these methods, it makes sense to make
            a <code>const operator[]</code> method that will return
            a <code>const</code> reference rather than a normal
            reference.  Let's implement that:
          </p>
          <pre class="prettyprint">
            // unchecked const access
            const T&amp; operator[](int index) const {
                return array_start[index];
            }

            // checked const access
            const T&amp; at(int index) const {
                if(index &lt; 0 || index &gt;= length)
                    throw std::out_of_range("Index out of range");
                return array_start[index];
            }
          </pre>
          <p>
            Now we can read elements from our <code>const Array</code>
            without changing it!  Each element returned will be
            a <code>const</code> reference so cannot be modified,
            ensuring the <code>const</code>ness of the
            <code>Array</code>.
          </p>
          <br />
          <p>
            I'll showing template meta programming next time and how
            to make your classes work with the standard library
            functions.
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
