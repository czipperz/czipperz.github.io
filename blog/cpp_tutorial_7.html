<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?skin=sunburst"></script>
    <title> Czipperz's Blog - C++ galore </title>
  </head>
  <body>
    <div id="page">
      <div id="top">
        <a href="index.html"><h1 id="title"> Czipperz's Blog - C++ galore </h1></a>
      </div>
      <div id="content">
        <div class="article" id="main_article">
          <h2><a href="cpp_tutorial_7.html">
              C++ Tutorial 7 - <code class="prettyprint">const</code>. </a></h2>
          <h4 class="date">12/19/2016</h4>
          <p>
            Here we will go over the <code class="prettyprint">const</code> keyword.
          </p>
          <pre class="prettyprint">
#include &lt;cstdio&gt;
#include &lt;string&gt;

using namespace std;

int main() {
    string message = "Message";
    message += " for you!";

    /* Visual Studio: */ getchar();
    return 0;
}
          </pre>
          <p>
            Here we declare a string and initialize it with the
            value <code class="prettyprint">"Message"</code>.  We then
            append <code class="prettyprint">" for you!"</code>,
            making <code class="prettyprint">message</code>
            contain <code class="prettyprint">"Message for
            you!"</code>.  Let's extract out this appendage to a
            function.
          </p>
          <pre class="prettyprint">
void append(string&amp; str) {
    str += " for you!";
}

    // in main()
    append(message);  // was `message += " for you!";`
          </pre>
          <p>
            When we pass a variable by reference to a function, we are
            sharing it with the function.  When we share it, they are
            also given write access to the variable.  Many times, we
            wish to share with only read access.  Our append function
            requires write access into the variable because it outputs
            data into it.  Let's make a print function to see why we
            would want read-only access.
          </p>
          <pre class="prettyprint">
#include &lt;iostream&gt;
void <span class="nocode">print</span>(string&amp; str) {
    cout &lt;&lt; str;
}
          </pre>
          <p>
            The <code class="prettyprint">str</code> parameter is taken
            by reference.  Just like
            in <code class="prettyprint">append</code>, we are able to
            modify the <code class="prettyprint">string</code>.  Since
            our print function doesn't actually modify the string, we
            should tell the computer that it won't.  To do this, we
            add the keyword <code class="prettyprint">const</code>
            before the ampersand marking it as a reference:
          </p>
          <pre class="prettyprint">
void <span class="nocode">print</span>(string const&amp; str) {
    cout &lt;&lt; str;
}
          </pre>
          <p>
            Before it was <code class="prettyprint">const</code>,
            writing <code class="prettyprint">
              <span class="nocode">print</span>("The milk man is
            here");</code> would give us an error at compile time.
            Marking it as <code class="prettyprint">const</code>
            allows it to work.  This shows us an important aspect
            of <code class="prettyprint">const</code> references: they
            allow the code to use temporary variables as arguments.
          </p>
          <br />
          <p>
            Since the parameter is taken as
            a <code class="prettyprint">const</code> reference, it
            also prevents <code>print()</code> from modifying
            the <code class="prettyprint">string</code>.  So the
            following code would also not compile because it modifies
            the parameter that is marked as unchangeable:
          </p>
          <pre class="prettyprint">
void append(string <u style="color:red">const</u>&amp; str) {
    str += " for you!";
}
          </pre>
          <p>
            Note that <code class="prettyprint">const&amp;</code>
            parameters only mean that the access to the variable will
            be constant, not that the actual variable
            is <code class="prettyprint">const</code>.
          </p>
        </div>
      </div>
    </div>
  </body>
</html>
