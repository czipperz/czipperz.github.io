<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?skin=sunburst"></script>
    <title> Czipperz's Blog - C++ galore </title>
  </head>
  <body>
    <div id="page">
      <div id="top">
        <h1 id="title"> Czipperz's Blog - C++ galore </h1>
      </div>
      <div id="content">
        <div class="article" id="main_article">
          <h2><a href="java_to_cpp_4.html"> Java to C++ - Pointers and Classes. </a></h2>
          <h4 class="date">9/23/2015</h4>
          <p>
            Pointers are fundamentally simple.  They simply tell you
            where a value is rather than giving you the actual value.  
            However, because of how destructors work, they can be 
            dangerous to use in certain situations.
            Let's look at an example of a pointer:
          </p>
          <pre class="prettyprint">
            #include &lt;iostream&gt;
    
            int main() {
                int* int_ptr = new int(0);
                std::cout &lt;&lt; *int_ptr &lt;&lt; std::endl;

            // memory leak! int_ptr is never deleted
            }
          </pre>
          <p>
            This shows the basic usage of a pointer.  In Java, ints 
            are always value types, so you have to return an int to 
            modify a variable.  In C++, everything is a value type 
            unless explicitly marked as a pointer or reference.
          </p>
          <br />
          <p>
            Pointers allow you to access native memory locations, so a pointer and int pair is all that an array really is!  Let's implement a simple class to represent an array:
          </p>
	  <pre class="prettyprint">
	    #include &lt;stdexcept&gt;   // std::out_of_range

	    // forces generic usage of this like ArrayList&lt;int&gt; for 
	    // types, ArrayList by itself is compile error!
	    template&lt;class T&gt;
	    class Array {
	        private:
		T* array_start;
		unsigned int length;

		public:
		// constructor
		Array() {
		    array_start = new T[10];
		    length = 10;
		}

		// destructor
		~Array() {
		    // not null test
		    if(array_start)
		        delete[] array_start;
                    // non pointers auto destructed
		}

		// random access - could commit suicide
	        T&amp; operator[](int index) {
		    return array_start[index];
		}

		// checked access - throws exception if out of bounds
		T&amp; at(int index) throw (std::out_of_range) {
		    if(index &lt; 0 || index &gt;= length)
		        throw std::out_of_range("Index out of range");
                    return array_start[index];
		}
            }
	  </pre>
	  <p>
	  </p>
        </div>
      </div>
    </div>
  </body>
</html>
